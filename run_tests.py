# run_tests.py
#!/usr/bin/env python3
"""
–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö pytest —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã
"""

import pytest
import sys
import os

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤"""
    print("üöÄ –ó–ê–ü–£–°–ö –í–°–ï–• PYTEST –¢–ï–°–¢–û–í")
    print("=" * 60)
    
    # –ê—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è pytest
    pytest_args = [
        "tests/",           # –ü–∞–ø–∫–∞ —Å —Ç–µ—Å—Ç–∞–º–∏
        "-v",               # –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
        "--tb=short",       # –ö–æ—Ä–æ—Ç–∫–∏–π traceback
        "--durations=10",   # –ü–æ–∫–∞–∑–∞—Ç—å 10 —Å–∞–º—ã—Ö –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
    ]
    
    # –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
    if len(sys.argv) > 1:
        if sys.argv[1] == "fast":
            pytest_args.extend(["-m", "not slow"])
            print("‚ö° –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤")
        elif sys.argv[1] == "slow":
            pytest_args.extend(["-m", "slow"])
            print("üêå –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤")
        elif sys.argv[1] == "performance":
            pytest_args.extend(["-m", "performance"])
            print("‚è±Ô∏è  –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º pytest
    exit_code = pytest.main(pytest_args)
    
    print("\n" + "=" * 60)
    if exit_code == 0:
        print("üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!")
    else:
        print("‚ùå –ù–ï–ö–û–¢–û–†–´–ï –¢–ï–°–¢–´ –ù–ï –ü–†–û–ô–î–ï–ù–´")
    
    sys.exit(exit_code)

if __name__ == "__main__":
    main()